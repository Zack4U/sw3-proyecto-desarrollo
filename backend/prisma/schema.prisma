generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

// Modelo para los Establecimientos
model Establishment {
    establishmentId   String   @id @db.Uuid
    name              String
    description       String?
    phone             String?
    email             String?
    address           String
    location          Json
    establishmentType String?
    createdAt         DateTime @default(now())
    updatedAt         DateTime @updatedAt

    // Relacion con usuario
    // Creado en mongo
    userId String @db.Uuid
    // Relación: Un establecimiento puede tener muchos alimentos
    foods  Food[]
}

// Modelo para los Alimentos
model Food {
    foodId       String     @id @default(uuid()) @db.Uuid
    name         String
    description  String?
    category     String?
    quantity     Float
    weightOfUnit String
    status       FoodStatus @default(AVAILABLE)
    imageUrl     String?
    expiresAt    DateTime   @db.Date
    createdAt    DateTime   @default(now())
    updatedAt    DateTime   @updatedAt

    // Relación: Un alimento pertenece a un establecimiento
    establishment   Establishment @relation(fields: [establishmentId], references: [establishmentId], onDelete: Cascade)
    establishmentId String        @db.Uuid
}

// Enum para los estados de los alimentos
enum FoodStatus {
    AVAILABLE
    RESERVED
    DELIVERED
    EXPIRED
}
